{"remainingRequest":"C:\\xampp\\htdocs\\pdv_universo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\pdv_universo\\src\\components\\clientes\\ClientesLista.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\pdv_universo\\src\\components\\clientes\\ClientesLista.vue","mtime":1603144535359},{"path":"C:\\xampp\\htdocs\\pdv_universo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1603220106800},{"path":"C:\\xampp\\htdocs\\pdv_universo\\node_modules\\babel-loader\\lib\\index.js","mtime":1603220101061},{"path":"C:\\xampp\\htdocs\\pdv_universo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1603220106800},{"path":"C:\\xampp\\htdocs\\pdv_universo\\node_modules\\vue-loader\\lib\\index.js","mtime":1603220194800}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBDbGllbnRlc0xpc3RhSXRlbSBmcm9tICdAL2NvbXBvbmVudHMvY2xpZW50ZXMvQ2xpZW50ZXNMaXN0YUl0ZW0udnVlJw0KDQppbXBvcnQgRXZlbnRCdXMgZnJvbSAnLi8uLi8uLi9ldmVudC1idXMnDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBjb21wb25lbnRzOiB7DQogICAgICAgIENsaWVudGVzTGlzdGFJdGVtDQogICAgfSwNCiAgICBwcm9wczogWydidXNjYSddLA0KDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGNvbnRhdG9zOiBbXSwNCiAgICAgICAgICAgIGNsaWVudGVzOiBbXQ0KICAgICAgICB9DQogICAgfSwNCiAgICBjb21wdXRlZDogew0KICAgICAgICBjbGllbnRlc0ZpbHRyYWRvcygpIHsNCiAgICAgICAgICAgIGNvbnN0IGJ1c2NhID0gdGhpcy5idXNjYQ0KICAgICAgICAgICAgcmV0dXJuICFidXNjYQ0KICAgICAgICAgICAgICAgID8gdGhpcy5jbGllbnRlcw0KICAgICAgICAgICAgICAgIDogdGhpcy5jbGllbnRlcy5maWx0ZXIoYyA9PiBjLm5vbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhidXNjYS50b0xvd2VyQ2FzZSgpKSkNCiAgICAgICAgfQ0KDQogICAgfSwNCiAgICBjcmVhdGVkKCkgew0KICAgICB0aGlzLmdldENsaWVudGVzKCk7DQogICAgIHRoaXMuY29udGF0b3MgPSBFdmVudEJ1cy5jb250YXRvcw0KICANCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgYXN5bmMgZ2V0Q2xpZW50ZXMoKSB7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgaHR0cDovLzEyNy4wLjAuMS9wZHZzb2x1c29mdC9ibG9nL3B1YmxpYy9hcGkvY2xpZW50ZXNgKTsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR0VUIC9wcm9kdXRvcycsIHJlc3BvbnNlKQ0KICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50ZXMgPSByZXNwb25zZS5kYXRhOw0KDQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIGRlbGV0YXJDbGllbnRlKGNsaWVudCkgew0KICAgICAgICAgICAgY29uc3QgY29uZmlybWFyID0gd2luZG93LmNvbmZpcm0oYERlc2VqYSBkZWxldGFyIGEgdGFyZWZhICIke2NsaWVudC5ub21lfSJjbGllbnRlP2ApDQogICAgICAgICAgICBpZiAoY29uZmlybWFyKSB7DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5kZWxldGUoYGh0dHA6Ly8xMjcuMC4wLjEvcGR2c29sdXNvZnQvYmxvZy9wdWJsaWMvYXBpL2NsaWVudGVzLyR7Y2xpZW50LmlkfWApDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGljZSA9IHRoaXMuY2xpZW50ZXMuZmluZEluZGV4KGMgPT4gYy5pZCA9PT0gY2xpZW50LmlkKQ0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR0VUIC9wcm9kdXRvcycsIHJlc3BvbnNlKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWVudGVzLnNwbGljZShpbmRpY2UsIDEpDQogICAgICAgICAgICAgICAgfSBjYXRjaChlcnJvcikgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJybyBhbyBkZWxldGFyIFRhcmVmYTogJywgZXJyb3IpDQogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlbXByZSBleGVjdXRhZG8hJykNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgYnVzY2FyKGV2ZW50KSB7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgICAgICAgICAgcGF0aDogJy9jbGllbnRlcycsDQogICAgICAgICAgICAgICAgcXVlcnk6IHsgYnVzY2E6IGV2ZW50LnRhcmdldC52YWx1ZSB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICB2b2x0YXIoKSB7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIuYmFjaygpDQogICAgICAgIH0NCiAgICB9DQp9DQo="},{"version":3,"sources":["ClientesLista.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ClientesLista.vue","sourceRoot":"src/components/clientes","sourcesContent":["<template>\r\n    <div>\r\n          <div class=\"row\">\r\n            <div class=\"col-sm-10\">\r\n                <h3 class=\"font-weight-light\">Lista de Clientes</h3>\r\n            </div>\r\n            <div class=\"col-sm-2\">\r\n                <router-link \r\n                    :to=\"`/clientes/criar`\"\r\n                    class=\"btn btn-info btn-sm float-right\">\r\n                    <span>Criar</span>\r\n                </router-link>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"form-group mt-2\">\r\n            <input \r\n                type=\"search\"\r\n                class=\"form-control\"\r\n                placeholder=\"Buscar Clientes\"\r\n                @keyup.enter=\"buscar\"\r\n                :value = \"busca\">\r\n        </div>\r\n\r\n        <hr>\r\n\r\n        \r\n        <table class=\"table\">\r\n                \r\n                <thead class=\"table table-striped table-sm table-bordered table-dark\">\r\n                    <tr >\r\n                    <th scoped=\"col-2\" >Código</th>\r\n                    <th scoped=\"col-6\">Nome</th>\r\n                    <th scoped=\"col-2\">cpf</th>\r\n                    <th scoped=\"col-2\">sexo</th>\r\n                    <th scoped=\"col-2\">e-mail</th>\r\n                    <th scoped=\"col-2\">açoes</th>\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody class=\"table table-striped table-bordered\">\r\n                   \r\n                    <ClientesListaItem\r\n                                v-for=\"cli in clientesFiltrados\"\r\n                                @delete=\"deletarCliente\"\r\n                                :key=\"cli.id\"\r\n                                :cliente=\"cli\"/>\r\n                   \r\n                </tbody>\r\n                \r\n        </table>\r\n\r\n\r\n        <button class=\"btn btn-secondary mt-4 mb-4\" @click=\"voltar\">Voltar</button>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport ClientesListaItem from '@/components/clientes/ClientesListaItem.vue'\r\n\r\nimport EventBus from './../../event-bus'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n    components: {\r\n        ClientesListaItem\r\n    },\r\n    props: ['busca'],\r\n\r\n    data() {\r\n        return {\r\n            contatos: [],\r\n            clientes: []\r\n        }\r\n    },\r\n    computed: {\r\n        clientesFiltrados() {\r\n            const busca = this.busca\r\n            return !busca\r\n                ? this.clientes\r\n                : this.clientes.filter(c => c.nome.toLowerCase().includes(busca.toLowerCase()))\r\n        }\r\n\r\n    },\r\n    created() {\r\n     this.getClientes();\r\n     this.contatos = EventBus.contatos\r\n  \r\n    },\r\n    methods: {\r\n        async getClientes() {\r\n\r\n                const response = await axios.get(`http://127.0.0.1/pdvsolusoft/blog/public/api/clientes`);\r\n                console.log('GET /produtos', response)\r\n                this.clientes = response.data;\r\n\r\n        },\r\n        async deletarCliente(client) {\r\n            const confirmar = window.confirm(`Deseja deletar a tarefa \"${client.nome}\"cliente?`)\r\n            if (confirmar) {\r\n                try {\r\n                    const response = await axios.delete(`http://127.0.0.1/pdvsolusoft/blog/public/api/clientes/${client.id}`)\r\n                    const indice = this.clientes.findIndex(c => c.id === client.id)\r\n                    console.log('GET /produtos', response)\r\n                    this.clientes.splice(indice, 1)\r\n                } catch(error) {\r\n                    console.log('Erro ao deletar Tarefa: ', error)\r\n                } finally {\r\n                    console.log('Sempre executado!')\r\n                }\r\n\r\n            }\r\n        },\r\n        buscar(event) {\r\n            this.$router.push({\r\n                path: '/clientes',\r\n                query: { busca: event.target.value }\r\n            })\r\n        },\r\n        voltar() {\r\n            this.$router.back()\r\n        }\r\n    }\r\n}\r\n</script>\r\n"]}]}