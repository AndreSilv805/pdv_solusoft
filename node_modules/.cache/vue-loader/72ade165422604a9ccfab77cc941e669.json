{"remainingRequest":"C:\\xampp\\htdocs\\pdv_universo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\pdv_universo\\src\\components\\pedidos\\PedidosVenda.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\pdv_universo\\src\\components\\pedidos\\PedidosVenda.vue","mtime":1603114018495},{"path":"C:\\xampp\\htdocs\\pdv_universo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\pdv_universo\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\pdv_universo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\pdv_universo\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCg0KDQoNCmltcG9ydCBFdmVudEJ1cyBmcm9tICcuLy4uLy4uL2V2ZW50LWJ1cycNCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycNCg0KaW1wb3J0IFBlZGlkb3NWZW5kYUl0ZW0gZnJvbSAnQC9jb21wb25lbnRzL3BlZGlkb3MvUGVkaWRvc1ZlbmRhSXRlbS52dWUnDQoNCg0KDQpleHBvcnQgZGVmYXVsdCB7DQoNCiAgICBjb21wb25lbnRzOiB7DQogICAgICAgIFBlZGlkb3NWZW5kYUl0ZW0sDQogICAgfSwNCg0KICAgIHByb3BzOiBbJ3BlZGlkbyddLA0KDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHBlZGlkb3M6IFtdLA0KICAgICAgICAgICAgDQogICAgICAgIH0NCiAgICB9LA0KICAgIA0KICAgICBmaWx0ZXJzOiB7DQogICAgICAgIG1vZWRhUmVhbCAodmFsdWUpIHsNCiAgICAgICAgcmV0dXJuIHZhbHVlLnRvTG9jYWxlU3RyaW5nKCdwdC1icicse3N0eWxlOidjdXJyZW5jeScsY3VycmVuY3k6J0JSTCd9KQ0KICAgICAgICB9DQogICAgIH0sDQoNCiAgICBjb21wdXRlZDogew0KICAgICAgICB0b3RhbFBlZGlkbzogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMucGVkaWRvLml0ZW1zLnJlZHVjZSgodG90YWwgLCBpdGVtKSA9PiB7DQogICAgICAgICAgICByZXR1cm4gdG90YWwgKyBpdGVtLnF1YW50aWRhZGUqaXRlbS52YWxvcl92ZW5kaWRvDQogICAgICAgICAgICB9LDApDQogICAgICAgIH0sDQogICAgICAgIHBlZGlkb3NGaWx0cmFkb3MoKSB7DQogICAgICAgICAgICBjb25zdCBidXNjYSA9IHRoaXMuYnVzY2ENCiAgICAgICAgICAgIHJldHVybiAhYnVzY2ENCiAgICAgICAgICAgICAgICA/IHRoaXMucGVkaWRvcw0KICAgICAgICAgICAgICAgIDogdGhpcy5wZWRpZG9zLmZpbHRlcihwID0+IHAub2JzZXJ2YWNhby50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGJ1c2NhLnRvTG93ZXJDYXNlKCkpKQ0KICAgICAgICB9DQoNCiAgICB9LA0KICAgIGNyZWF0ZWQoKSB7DQogICAgIHRoaXMuZ2V0UGVkaWRvcygpOw0KICAgICB0aGlzLnBlZGlkb3MgPSBFdmVudEJ1cy5wZWRpZG9zDQogIA0KICAgIH0sDQoNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGFzeW5jIGdldFBlZGlkb3MoKSB7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgaHR0cDovLzEyNy4wLjAuMS9wZHZzb2x1c29mdC9ibG9nL3B1YmxpYy9hcGkvcGVkaWRvc2ApOw0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHRVQgL3Byb2R1dG9zJywgcmVzcG9uc2UpDQogICAgICAgICAgICAgICAgdGhpcy5wZWRpZG9zID0gcmVzcG9uc2UuZGF0YTsNCg0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBkZWxldGFySXRlbShpdGVtMikgew0KICAgICAgICAgICAgY29uc3QgY29uZmlybWFyID0gd2luZG93LmNvbmZpcm0oYERlc2VqYSBkZWxldGFyIGEgdGFyZWZhICIke2l0ZW0yLmlkfSI/YCkNCiAgICAgICAgICAgIGlmIChjb25maXJtYXIpIHsNCg0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLmRlbGV0ZShgaHR0cDovLzEyNy4wLjAuMS9wZHZzb2x1c29mdC9ibG9nL3B1YmxpYy9hcGkvcGVkaWRvcy9yZW1vdmVyLyR7aXRlbTIuaWR9YCkNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kaWNlID0gdGhpcy5wZWRpZG8uaXRlbXMuZmluZEluZGV4KGkgPT4gaS5pZCA9PT0gaXRlbTIuaWQpDQogICAgICAgICAgICAgICAgICAgIHRoaXMucGVkaWRvLml0ZW1zLnNwbGljZShpbmRpY2UsIDEpDQogICAgICAgICAgICAgICAgfSBjYXRjaChlcnJvcikgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJybyBhbyBkZWxldGFyIFRhcmVmYTogJywgZXJyb3IpDQogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlbXByZSBleGVjdXRhZG8hJykNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgYnVzY2FyKGV2ZW50KSB7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgICAgICAgICAgcGF0aDogJy9wZWRpZG9zJywNCiAgICAgICAgICAgICAgICBxdWVyeTogeyBidXNjYTogZXZlbnQudGFyZ2V0LnZhbHVlIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIHZvbHRhcigpIHsNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5iYWNrKCkNCiAgICAgICAgfSwNCiAgICB9DQp9DQo="},{"version":3,"sources":["PedidosVenda.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PedidosVenda.vue","sourceRoot":"src/components/pedidos","sourcesContent":["<template>\r\n    <div style=\"height:600px\" class=\" col-sm-12 col-lg-8 float-left\">\r\n          \r\n          \r\n          <div id=\"listgroup-ex\" style=\"position:relative;  overflow-y:auto; height:600px\">\r\n            \r\n\r\n                <table class=\"table\">\r\n                \r\n                <thead class=\"table table-striped table-bordered table-dark\">\r\n                    <tr >\r\n                    <th style=\"width:5%\" scoped=\"col\" >item</th>\r\n                    <th style=\"width:5%\" scoped=\"col\">código</th>\r\n                    <th style=\"width:45%\" scoped=\"col\">produto</th>\r\n                    <th style=\"width:5%\" scoped=\"col\">quant.</th>\r\n                    <th style=\"width:15%\" scoped=\"col\">valor</th>\r\n                    <th style=\"width:15%\" scoped=\"col\">total</th>\r\n                    <th style=\"width:10%\" scoped=\"col\">ações</th>\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody class=\"table table-striped table-sm table-bordered\">\r\n                   \r\n                   <PedidosVendaItem\r\n                                v-for=\"ped in pedido.items\"\r\n                                @delete=\"deletarItem\"\r\n                                :key=\"ped.id\"\r\n                                :item=\"ped\"/>\r\n                                \r\n                   <!--<tr v-for=\" item in pedido.items\"\r\n                    :key=\"item.id\">\r\n\r\n                    <td >1</td>\r\n                    <td >{{item.cod_produto}}</td>\r\n                    <td >{{item.nome}}</td>\r\n                    <td >{{item.quantidade}}</td>\r\n                    <td >{{item.valor_vendido | moedaReal}}</td>\r\n                    <td >{{item.quantidade*item.valor_vendido | moedaReal}}</td>\r\n                    <td> <button \r\n                            class=\"btn btn-danger btn-sm mr-2 float-right\" \r\n                            title=\"Deletar\">\r\n                                Excluir\r\n                        </button>\r\n                    </td>\r\n                    </tr>-->\r\n                   \r\n                </tbody>\r\n                \r\n        </table>\r\n              \r\n\r\n\r\n\r\n\r\n          </div>\r\n          <div class=\"col-12\"> <h4 class=\"float-right pr-5\">Total:  {{totalPedido | moedaReal}}</h4></div>\r\n          \r\n\r\n          <div style=\"clear:both\"></div>            \r\n          \r\n           <b-button class=\"mt-lg-2 ml-5 col-lg-4\" variant=\"danger\" @click=\"$router.back()\">Aguradar</b-button> \r\n           <!--<b-button class=\"mt-lg-2 col-lg-6\" variant=\"success\" @click=\"adicionar\">Finalizar</b-button>-->\r\n           <router-link :to=\"`/pedidorota/1/fechar`\" @click=\"adicionar\" class=\"mt-lg-2 mr-5 col-lg-4 btn btn-success float-right\">Finalizar</router-link>\r\n            \r\n       \r\n               \r\n        </div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\n\r\n\r\nimport EventBus from './../../event-bus'\r\nimport axios from 'axios'\r\n\r\nimport PedidosVendaItem from '@/components/pedidos/PedidosVendaItem.vue'\r\n\r\n\r\n\r\nexport default {\r\n\r\n    components: {\r\n        PedidosVendaItem,\r\n    },\r\n\r\n    props: ['pedido'],\r\n\r\n    data() {\r\n        return {\r\n            pedidos: [],\r\n            \r\n        }\r\n    },\r\n    \r\n     filters: {\r\n        moedaReal (value) {\r\n        return value.toLocaleString('pt-br',{style:'currency',currency:'BRL'})\r\n        }\r\n     },\r\n\r\n    computed: {\r\n        totalPedido: function () {\r\n            return this.pedido.items.reduce((total , item) => {\r\n            return total + item.quantidade*item.valor_vendido\r\n            },0)\r\n        },\r\n        pedidosFiltrados() {\r\n            const busca = this.busca\r\n            return !busca\r\n                ? this.pedidos\r\n                : this.pedidos.filter(p => p.observacao.toLowerCase().includes(busca.toLowerCase()))\r\n        }\r\n\r\n    },\r\n    created() {\r\n     this.getPedidos();\r\n     this.pedidos = EventBus.pedidos\r\n  \r\n    },\r\n\r\n    methods: {\r\n        async getPedidos() {\r\n\r\n                const response = await axios.get(`http://127.0.0.1/pdvsolusoft/blog/public/api/pedidos`);\r\n                console.log('GET /produtos', response)\r\n                this.pedidos = response.data;\r\n\r\n        },\r\n        async deletarItem(item2) {\r\n            const confirmar = window.confirm(`Deseja deletar a tarefa \"${item2.id}\"?`)\r\n            if (confirmar) {\r\n\r\n                try {\r\n                    await axios.delete(`http://127.0.0.1/pdvsolusoft/blog/public/api/pedidos/remover/${item2.id}`)\r\n                    const indice = this.pedido.items.findIndex(i => i.id === item2.id)\r\n                    this.pedido.items.splice(indice, 1)\r\n                } catch(error) {\r\n                    console.log('Erro ao deletar Tarefa: ', error)\r\n                } finally {\r\n                    console.log('Sempre executado!')\r\n                }\r\n\r\n            }\r\n        },\r\n        buscar(event) {\r\n            this.$router.push({\r\n                path: '/pedidos',\r\n                query: { busca: event.target.value }\r\n            })\r\n        },\r\n        voltar() {\r\n            this.$router.back()\r\n        },\r\n    }\r\n}\r\n</script>\r\n"]}]}