{"remainingRequest":"C:\\xampp\\htdocs\\pdv_universo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\pdv_universo\\src\\components\\produtos\\ProdutosLista.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\pdv_universo\\src\\components\\produtos\\ProdutosLista.vue","mtime":1603162124988},{"path":"C:\\xampp\\htdocs\\pdv_universo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1603220106800},{"path":"C:\\xampp\\htdocs\\pdv_universo\\node_modules\\babel-loader\\lib\\index.js","mtime":1603220101061},{"path":"C:\\xampp\\htdocs\\pdv_universo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1603220106800},{"path":"C:\\xampp\\htdocs\\pdv_universo\\node_modules\\vue-loader\\lib\\index.js","mtime":1603220194800}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCg0KaW1wb3J0IFByb2R1dG9zTGlzdGFJdGVtIGZyb20gJ0AvY29tcG9uZW50cy9wcm9kdXRvcy9Qcm9kdXRvc0xpc3RhSXRlbS52dWUnDQoNCg0KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJw0KDQoNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIGNvbXBvbmVudHM6IHsNCiAgICAgICAgUHJvZHV0b3NMaXN0YUl0ZW0sDQogICAgfSwNCg0KICAgIHByb3BzOiBbJ3Byb2R1dG9zJ10sDQoNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICANCiAgICAgICAgICAgIHByb2R1dG9zMjogW10sDQogICAgICAgICAgICANCiAgICAgICAgfQ0KICAgIH0sDQogICAgYmVmb3JlUm91dGVFbnRlcih0bywgZnJvbSwgbmV4dCkgew0KICAgICAgICBuZXh0KHZtID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHByb2QgPSB2bS5nZXRQcm9kdXRvcygpOw0KICAgICAgICAgICAgdm0ucHJvZHV0b3MgPSBwcm9kOw0KICAgICAgICB9KQ0KICAgIH0sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgcHJvZHV0b3NGaWx0cmFkb3MoKSB7DQogICAgICAgICAgICBjb25zdCBidXNjYSA9IHRoaXMuYnVzY2ENCiAgICAgICAgICAgIHJldHVybiAhYnVzY2ENCiAgICAgICAgICAgICAgICA/IHRoaXMucHJvZHV0b3MNCiAgICAgICAgICAgICAgICA6IHRoaXMucHJvZHV0b3MuZmlsdGVyKHAgPT4gcC5ub21lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoYnVzY2EudG9Mb3dlckNhc2UoKSkpDQogICAgICAgIH0NCg0KICAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgdGhpcy5nZXRQcm9kdXRvcygpOw0KICAgICANCiAgDQogICAgfSwNCg0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgYXN5bmMgZ2V0UHJvZHV0b3MoKSB7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgaHR0cDovLzEyNy4wLjAuMS9wZHZzb2x1c29mdC9ibG9nL3B1YmxpYy9hcGkvcHJvZHV0b3NgKTsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR0VUIC9wcm9kdXRvcycsIHJlc3BvbnNlKQ0KICAgICAgICAgICAgICAgIHRoaXMucHJvZHV0b3MgPSByZXNwb25zZS5kYXRhOw0KDQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIGRlbGV0YXJUYXJlZmEocHJvZHV0bykgew0KICAgICAgICAgICAgY29uc3QgY29uZmlybWFyID0gd2luZG93LmNvbmZpcm0oYERlc2VqYSBkZWxldGFyIGEgdGFyZWZhICIke3Byb2R1dG8ubm9tZX0iP2ApDQogICAgICAgICAgICBpZiAoY29uZmlybWFyKSB7DQoNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5kZWxldGUoYGh0dHA6Ly8xMjcuMC4wLjEvcGR2c29sdXNvZnQvYmxvZy9wdWJsaWMvYXBpL3Byb2R1dG9zLyR7cHJvZHV0by5pZH1gKQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRpY2UgPSB0aGlzLnByb2R1dG9zLmZpbmRJbmRleCh0ID0+IHQuaWQgPT09IHByb2R1dG8uaWQpDQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHV0b3Muc3BsaWNlKGluZGljZSwgMSkNCiAgICAgICAgICAgICAgICB9IGNhdGNoKGVycm9yKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvIGFvIGRlbGV0YXIgVGFyZWZhOiAnLCBlcnJvcikNCiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VtcHJlIGV4ZWN1dGFkbyEnKQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBidXNjYXIoZXZlbnQpIHsNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgICAgICAgICBwYXRoOiAnL3Byb2R1dG9zJywNCiAgICAgICAgICAgICAgICBxdWVyeTogeyBidXNjYTogZXZlbnQudGFyZ2V0LnZhbHVlIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIHZvbHRhcigpIHsNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5iYWNrKCkNCiAgICAgICAgfSwNCiAgICB9DQp9DQo="},{"version":3,"sources":["ProdutosLista.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;;;AAGA;;;;AAIA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProdutosLista.vue","sourceRoot":"src/components/produtos","sourcesContent":["<template>\r\n    <div>\r\n       \r\n        <div class=\"row\">\r\n            <div class=\"col-sm-10\">\r\n                <h3 class=\"font-weight-light\">Lista de Produtos</h3>\r\n            </div>\r\n            <div class=\"col-sm-2\">\r\n                <router-link \r\n                    :to=\"`/produtos/criar`\"\r\n                    class=\"btn btn-info btn-sm float-right\">\r\n                    <span>Criar Produto</span>\r\n                </router-link>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"form-group mt-2\">\r\n            <input \r\n                type=\"search\"\r\n                class=\"form-control\"\r\n                placeholder=\"Buscar contatos\"\r\n                @keyup.enter=\"buscar\"\r\n                :value = \"busca\">\r\n        </div>\r\n\r\n        <hr>\r\n\r\n       \r\n\r\n        <table class=\"table\">\r\n\r\n                <thead class=\"table table-striped table-sm table-bordered table-dark\">\r\n                    <tr>\r\n                    <th style=\"width:15%\" scoped=\"col-2\" >Código</th>\r\n                    <th style=\"width:45%\" scoped=\"col-6\">Produto</th>\r\n                    <th style=\"width:20%\" scoped=\"col-2\">valor</th>\r\n                    <th style=\"width:20%\" scoped=\"col-2\" class=\"text-align-center\">açoes</th>\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody class=\"table table-striped table-bordered\">\r\n                   \r\n                    <ProdutosListaItem\r\n                                v-for=\"prod in produtosFiltrados\"\r\n                                @delete=\"deletarTarefa\"\r\n                                :key=\"prod.id\"\r\n                                :produto=\"prod\"/>\r\n                   \r\n                </tbody>\r\n                \r\n        </table>\r\n     \r\n\r\n\r\n\r\n\r\n        <button class=\"btn btn-secondary mt-4 mb-4\" @click=\"voltar\">Voltar</button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport ProdutosListaItem from '@/components/produtos/ProdutosListaItem.vue'\r\n\r\n\r\nimport axios from 'axios'\r\n\r\n\r\n\r\nexport default {\r\n    components: {\r\n        ProdutosListaItem,\r\n    },\r\n\r\n    props: ['produtos'],\r\n\r\n    data() {\r\n        return {\r\n           \r\n            produtos2: [],\r\n            \r\n        }\r\n    },\r\n    beforeRouteEnter(to, from, next) {\r\n        next(vm => {\r\n            const prod = vm.getProdutos();\r\n            vm.produtos = prod;\r\n        })\r\n    },\r\n    computed: {\r\n        produtosFiltrados() {\r\n            const busca = this.busca\r\n            return !busca\r\n                ? this.produtos\r\n                : this.produtos.filter(p => p.nome.toLowerCase().includes(busca.toLowerCase()))\r\n        }\r\n\r\n    },\r\n    created() {\r\n     this.getProdutos();\r\n     \r\n  \r\n    },\r\n\r\n    methods: {\r\n        async getProdutos() {\r\n\r\n                const response = await axios.get(`http://127.0.0.1/pdvsolusoft/blog/public/api/produtos`);\r\n                console.log('GET /produtos', response)\r\n                this.produtos = response.data;\r\n\r\n        },\r\n        async deletarTarefa(produto) {\r\n            const confirmar = window.confirm(`Deseja deletar a tarefa \"${produto.nome}\"?`)\r\n            if (confirmar) {\r\n\r\n                try {\r\n                    await axios.delete(`http://127.0.0.1/pdvsolusoft/blog/public/api/produtos/${produto.id}`)\r\n                    const indice = this.produtos.findIndex(t => t.id === produto.id)\r\n                    this.produtos.splice(indice, 1)\r\n                } catch(error) {\r\n                    console.log('Erro ao deletar Tarefa: ', error)\r\n                } finally {\r\n                    console.log('Sempre executado!')\r\n                }\r\n\r\n            }\r\n        },\r\n        buscar(event) {\r\n            this.$router.push({\r\n                path: '/produtos',\r\n                query: { busca: event.target.value }\r\n            })\r\n        },\r\n        voltar() {\r\n            this.$router.back()\r\n        },\r\n    }\r\n}\r\n</script>\r\n"]}]}